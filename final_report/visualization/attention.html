
    <html lang="en">
    <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <style>
    body {
    font-family: Sans-Serif;
    }
    </style>
    </head>
    <body>
    <h3>
    Heatmaps
    </h3>
    </body>
    <script>
    var any_text = ["[neutral] <PAD> <PAD> <PAD> <PAD> i think its great its great yknow theyre thinking of changing the name of this place","[non-neutral] <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> i played bad on purpose guys","[surprise] <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> you re not serious i mean you really you really talk to it","[neutral] <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> uh shes with me dr drake remoray","[neutral] <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> thats just the way it is","[non-neutral] <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> i mean sex does not have to be a big deal","[sadness] <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> really its nothing im just","[non-neutral] <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> ah oh god oh honey oh that s ok","[neutral] <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> hi","[neutral] <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> <PAD> im chris this is where i lean"];
var trigram_weights = [[0, 0.0012273350730538368, 0.010073898360133171, 0.013575147837400436, 0.014312740415334702, 0.08775757253170013, 0.21060490608215332, 0.012312937527894974, 2.5524051189422607, 0.012311120517551899, 2.5433976650238037, 0.37839579582214355, 0.0989740788936615, 0.20816069841384888, 0.018779216334223747, 0.9550892114639282, 0.015735384076833725, 1.2565287351608276, 0.023184075951576233, 0.014447569847106934, 1.5727269649505615],[0, 0.00019718865223694593, 0.0016230812761932611, 0.002188073005527258, 0.002307132352143526, 0.002329241018742323, 0.0023332766722887754, 0.0023340259213000536, 0.002334168879315257, 0.0023341956548392773, 0.0023342017084360123, 0.002334203105419874, 0.002334203105419874, 0.002334203105419874, 0.002334203105419874, 0.014260342344641685, 0.02706965245306492, 0.30275243520736694, 0.01950789988040924, 9.589818000793457, 0.01693989336490631],[0, 0.004584810696542263, 0.03769243508577347, 0.050794556736946106, 0.053555019199848175, 0.05406763404607773, 0.05416121333837509, 0.05417858809232712, 0.49796900153160095, 0.19087514281272888, 0.9619208574295044, 2.0059728622436523, 0.39470428228378296, 0.08137737959623337, 0.3977009057998657, 2.072620391845703, 0.4776975214481354, 2.075087785720825, 0.18465778231620789, 0.036222342401742935, 0.3141595721244812],[0, 0.0046706609427928925, 0.03838974982500076, 0.05173990875482559, 0.054552726447582245, 0.055075034499168396, 0.05517037957906723, 0.05518808215856552, 0.05519144982099533, 0.055192090570926666, 0.05519223213195801, 0.055192265659570694, 0.055192265659570694, 0.055192265659570694, 0.5917905569076538, 0.0598989762365818, 0.02852175012230873, 0.45881569385528564, 1.9282851219177246, 2.6048331260681152, 3.681915760040283],[0, 0.025164242833852768, 0.20690888166427612, 0.27885740995407104, 0.2940181493759155, 0.2968335747718811, 0.2973475456237793, 0.2974429726600647, 0.2974611222743988, 0.29746460914611816, 0.29746535420417786, 0.2974655032157898, 0.2974655032157898, 0.2974655032157898, 0.2974655032157898, 0.48881328105926514, 0.5583493709564209, 0.33324557542800903, 1.3935039043426514, 2.4805355072021484, 0.9667269587516785],[0, 0.011196242645382881, 0.09210791438817978, 0.12415382266044617, 0.13090702891349792, 0.13216114044189453, 0.1323900818824768, 0.13243259489536285, 0.13244067132472992, 0.13244222104549408, 0.8098908066749573, 0.19900819659233093, 0.011920273303985596, 1.1102603673934937, 3.3635520935058594, 0.6799864768981934, 0.09847211837768555, 0.12977825105190277, 0.11967910081148148, 0.830108642578125, 1.6271123886108398],[0, 0.008571047335863113, 0.07047740370035172, 0.09498795866966248, 0.10015279054641724, 0.10111190378665924, 0.10128699243068695, 0.10131949931383133, 0.10132568329572678, 0.10132686793804169, 0.10132712125778198, 0.10132718086242676, 0.10132718086242676, 0.10132718086242676, 0.10132718086242676, 0.10132718086242676, 4.364431381225586, 0.09253858774900436, 3.232278823852539, 0.7079982757568359, 0.2142293006181717],[0, 0.007067172322422266, 0.05809379369020462, 0.07828643918037415, 0.08254053443670273, 0.08333050459623337, 0.08347471058368683, 0.08350147306919098, 0.08350657671689987, 0.08350754529237747, 0.08350776880979538, 0.08350779861211777, 0.1034146249294281, 1.6856508255004883, 0.9595187902450562, 2.2667245864868164, 0.8275636434555054, 2.461719512939453, 0.13777180016040802, 0.10492811352014542, 0.642383337020874],[0, 0.024456996470689774, 0.20085835456848145, 0.27068525552749634, 0.2853969633579254, 0.28812867403030396, 0.2886273264884949, 0.28871989250183105, 0.2887375056743622, 0.2887409031391144, 0.2887416183948517, 0.2887417674064636, 0.288741797208786, 0.288741797208786, 0.288741797208786, 0.288741797208786, 0.288741797208786, 0.288741797208786, 0.288741797208786, 0.288741797208786, 4.888230323791504],[0, 0.00020014496112708002, 0.0016473275609314442, 0.002220842521637678, 0.002341704908758402, 0.002364149084314704, 0.0023682466708123684, 0.0023690068628638983, 0.0023691519163548946, 0.002369179157540202, 0.002369185443967581, 0.002369186608120799, 0.002369186608120799, 0.002369186608120799, 0.004307127092033625, 9.786787033081055, 0.002764700446277857, 0.007150722201913595, 0.02454817295074463, 0.009436393156647682, 0.13727901875972748]];

    var color = "255,0,0";
    var ngram_length = 3;
    var half_ngram = 1;
    for (var k=0; k < any_text.length; k++) {
    var tokens = any_text[k].split(" ");
    var intensity = new Array(tokens.length);
    var max_intensity = Number.MIN_SAFE_INTEGER;
    var min_intensity = Number.MAX_SAFE_INTEGER;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = 0.0;
    for (var j = -half_ngram; j < ngram_length-half_ngram; j++) {
    if (i+j < intensity.length && i+j > -1) {
    intensity[i] += trigram_weights[k][i + j];
    }
    }
    if (i == 0 || i == intensity.length-1) {
    intensity[i] /= 2.0;
    } else {
    intensity[i] /= 3.0;
    }
    if (intensity[i] > max_intensity) {
    max_intensity = intensity[i];
    }
    if (intensity[i] < min_intensity) {
    min_intensity = intensity[i];
    }
    }
    var denominator = max_intensity - min_intensity;
    for (var i = 0; i < intensity.length; i++) {
    intensity[i] = (intensity[i] - min_intensity) / denominator;
    }
    if (k%2 == 0) {
    var heat_text = "<p><br><b>Result:</b><br>";
    } else {
    var heat_text = "<b>Result:</b><br>";
    }
    var space = "";
    for (var i = 0; i < tokens.length; i++) {
    heat_text += "<span style='background-color:rgba(" + color + "," + intensity[i] + ")'>" + space + tokens[i] + "</span>";
    if (space == "") {
    space = " ";
    }
    }
    //heat_text += "<p>";
    document.body.innerHTML += heat_text;
    }
    </script>
    </html>